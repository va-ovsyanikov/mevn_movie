(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0d842bf5"],{"2cea":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-container",{attrs:{"mt-6":""}},[i("h3",[e._v("Редактирование")]),e.notice?i("Modal",{on:{alertHide:e.alertHide}},[e._v(e._s(e.notice))]):e._e(),i("v-form",{ref:"form",staticClass:"mt-6",attrs:{"lazy-validation":"",action:"add-post",method:"post",enctype:"multipart/form-data"},on:{submit:function(t){return t.preventDefault(),e.submitForm.apply(null,arguments)}},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[i("v-text-field",{attrs:{counter:10,rules:e.titleRules,label:"Название фильма",required:"","prepend-icon":"mdi-note",name:"title"},model:{value:e.postEdit.title,callback:function(t){e.$set(e.postEdit,"title","string"===typeof t?t.trim():t)},expression:"postEdit.title"}}),i("v-text-field",{attrs:{rules:e.categoryRules,label:"Жанр",required:"","prepend-icon":"mdi-view-list",name:"category"},model:{value:e.postEdit.category,callback:function(t){e.$set(e.postEdit,"category","string"===typeof t?t.trim():t)},expression:"postEdit.category"}}),i("v-text-field",{attrs:{type:"number",rules:e.releasedRules,label:"Релиз",required:"","prepend-icon":"mdi-bookmark-check",name:"released"},model:{value:e.postEdit.released,callback:function(t){e.$set(e.postEdit,"released","string"===typeof t?t.trim():t)},expression:"postEdit.released"}}),i("v-textarea",{staticClass:"mb-6",attrs:{clearable:"","clear-icon":"mdi-close-circle",label:"Описание",required:"",rules:e.descRules,"prepend-icon":"mdi-note-plus",name:"description"},model:{value:e.postEdit.description,callback:function(t){e.$set(e.postEdit,"description","string"===typeof t?t.trim():t)},expression:"postEdit.description"}}),i("v-text-field",{attrs:{rules:e.previewRules,label:"Трейлер (iframe)",required:"","prepend-icon":"mdi-movie-open-play",name:"preview"},model:{value:e.postEdit.preview,callback:function(t){e.$set(e.postEdit,"preview","string"===typeof t?t.trim():t)},expression:"postEdit.preview"}}),i("v-file-input",{attrs:{label:"Новое изображение",counter:"",multiple:"",name:"uploadImage"},on:{change:e.selectFile},model:{value:e.file,callback:function(t){e.file=t},expression:"file"}}),i("v-img",{attrs:{"max-height":"150","max-width":"250",src:"/"+e.postEdit.image}}),i("div",{staticClass:"btn_group"},[i("v-btn",{staticClass:"mr-4",attrs:{disabled:!e.valid,color:"success",type:"submit"}},[e._v("Изменить")]),i("v-btn",{staticClass:"mr-4",attrs:{color:"warning"},on:{click:e.reset}},[e._v(" Сброс ")])],1)],1)],1)},s=[],r=i("5530"),o=(i("a4d3"),i("e01a"),i("2f62")),n=i("714b"),l={name:"AddPost",components:{Modal:n["a"]},data:function(){return{alert_show:"",valid:!0,file:[],img:"",titleRules:[function(e){return!!e||"Название обязательно"}],categoryRules:[function(e){return!!e||"Жанр обязательно"}],releasedRules:[function(e){return!!e||"Релиз обязательно"}],descRules:[function(e){return!!e||"Описание обязательно"}],previewRules:[function(e){return!!e||"Трейлер обязательно"}]}},computed:Object(r["a"])({},Object(o["c"])({postEdit:"GET_POST",notice:"NOTICE_EDIT"})),methods:Object(r["a"])(Object(r["a"])(Object(r["a"])({},Object(o["b"])(["CREATE_POST","FETCH_POST","EDIT_POST"])),Object(o["d"])(["NOTICE_HIDE"])),{},{selectFile:function(e){this.img=e[0]},submitForm:function(){this.$refs.form.validate();var e=new FormData;e.append("title",this.postEdit.title),e.append("category",this.postEdit.category),e.append("released",this.postEdit.released),e.append("preview",this.postEdit.preview),e.append("description",this.postEdit.description),e.append("image",this.img),e.append("oldImage",this.postEdit.image),this.EDIT_POST({id:this.$route.params.id,data:e}),this.$refs.form.validate()&&this.$refs.form.reset()},alertHide:function(){this.NOTICE_HIDE(),this.$router.push({name:"Post",params:{id:this.postEdit._id}})},reset:function(){this.$refs.form.reset()}}),mounted:function(){this.FETCH_POST(this.$route.params.id)}},d=l,c=(i("2e31"),i("2877")),p=i("6544"),u=i.n(p),m=i("8336"),f=i("a523"),v=i("23a7"),b=i("4bd4"),E=i("adda"),h=i("8654"),g=i("a844"),_=Object(c["a"])(d,a,s,!1,null,"20fda2ac",null);t["default"]=_.exports;u()(_,{VBtn:m["a"],VContainer:f["a"],VFileInput:v["a"],VForm:b["a"],VImg:E["a"],VTextField:h["a"],VTextarea:g["a"]})},"2e31":function(e,t,i){"use strict";i("49c6")},"49c6":function(e,t,i){}}]);
//# sourceMappingURL=chunk-0d842bf5.a3fd8a65.js.map